<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="This package provides a few helper functions for working with
    the Source Linkage Files (SLFs). The functions are mainly focussed on
    making the first steps of analysis easier. They can read in and filter
    the files in an efficient way using minimal syntax. If you find a bug
    or have any ideas for new functions or improvements get in touch or
    submit a pull request.">
<title>Useful functions for working with the Source Linkage Files â€¢ slfhelper</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Useful functions for working with the Source Linkage Files">
<meta property="og:description" content="This package provides a few helper functions for working with
    the Source Linkage Files (SLFs). The functions are mainly focussed on
    making the first steps of analysis easier. They can read in and filter
    the files in an efficient way using minimal syntax. If you find a bug
    or have any ideas for new functions or improvements get in touch or
    submit a pull request.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">slfhelper</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/variable-packs.html">Using variable packs</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Public-Health-Scotland/slfhelper/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="slfhelper">slfhelper<a class="anchor" aria-label="anchor" href="#slfhelper"></a>
</h1></div>
<p>The goal of slfhelper is to provide some easy-to-use functions that make working with the Source Linkage Files as painless and efficient as possible.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The preferred method of installation is to use the <a href="https://pak.r-lib.org/" class="external-link">{<code>pak</code>} package</a>, which does an excellent job of handling the errors which sometimes occur.</p>
<p>We previously recommended <a href="https://remotes.r-lib.org/" class="external-link">{<code>remotes</code>} package</a>, <code>remotes::install_github("Public-Health-Scotland/slfhelper")</code> still works but there have been issues reported with it failing to properly install dependencies.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span>

<span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="http://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"Public-Health-Scotland/slfhelper"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="read-a-file">Read a file<a class="anchor" aria-label="anchor" href="#read-a-file"></a>
</h3>
<p><strong>Note:</strong> Reading a full file is quite slow, we would always recommend doing a column selection to only keep the variables that you need for your analysis. Just doing this will dramatically speed up the read-time.</p>
<p>We provide some data snippets to help with the column selection and filtering.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://public-health-scotland.github.io/slfhelper/">slfhelper</a></span><span class="op">)</span>

<span class="co"># Get a list of the variables in a file</span>
<span class="va">ep_file_vars</span>
<span class="va">indiv_file_vars</span>

<span class="co"># See a lookup of Partnership names to HSCP_2018 codes</span>
<span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">partnerships</span><span class="op">)</span>

<span class="co"># See a list with descriptions for the recids</span>
<span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">recids</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://public-health-scotland.github.io/slfhelper/">slfhelper</a></span><span class="op">)</span>

<span class="co"># Read a full file</span>
<span class="va">ep_1718</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_slf_episode.html">read_slf_episode</a></span><span class="op">(</span><span class="st">"1718"</span><span class="op">)</span>
<span class="va">indiv_1718</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_slf_individual.html">read_slf_individual</a></span><span class="op">(</span><span class="st">"1718"</span><span class="op">)</span>

<span class="co"># Read multiple years</span>
<span class="co"># This will use dplyr::bind_rows() and return the files added together as a single tibble</span>
<span class="va">episode_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_slf_episode.html">read_slf_episode</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1516"</span>, <span class="st">"1617"</span>, <span class="st">"1718"</span>, <span class="st">"1819"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Read certain variables</span>
<span class="co"># It's much faster to choose variables like this</span>
<span class="va">indiv_1718</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_slf_individual.html">read_slf_individual</a></span><span class="op">(</span><span class="st">"1718"</span>, columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"anon_chi"</span>, <span class="st">"hri_scot"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Read only data for a certain partnership (HSCP_2018 code)</span>
<span class="co"># This can be a single partnership or multiple by supplying a vector e.g. c(...)</span>
<span class="va">indiv_1718</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_slf_individual.html">read_slf_individual</a></span><span class="op">(</span><span class="st">"1718"</span>, partnerships <span class="op">=</span> <span class="st">"S37000001"</span><span class="op">)</span> <span class="co"># Aberdeen City</span>

<span class="co"># Read only data for a certain recid</span>
<span class="co"># This can be a single recid or multiple by supplying a vector e.g. c(...)</span>
<span class="va">ep_1718</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_slf_episode.html">read_slf_episode</a></span><span class="op">(</span><span class="st">"1718"</span>, recid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"01B"</span>, <span class="st">"GLS"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># single recid filtering</span>
<span class="va">ep_1718_recid_04B</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_slf_episode.html">read_slf_episode</a></span><span class="op">(</span><span class="st">"1718"</span>, recid <span class="op">=</span> <span class="st">"04B"</span><span class="op">)</span></code></pre></div>
<p>Any of the above options for reading files can be combined if required.</p>
</div>
<div class="section level3">
<h3 id="match-on-chi-numbers-to-anon_chi-or-vice-versa">Match on CHI numbers to Anon_CHI (or vice versa)<a class="anchor" aria-label="anchor" href="#match-on-chi-numbers-to-anon_chi-or-vice-versa"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://public-health-scotland.github.io/slfhelper/">slfhelper</a></span><span class="op">)</span>

<span class="co"># Add real CHI numbers to a SLF</span>
<span class="va">ep_1718</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_slf_episode.html">read_slf_episode</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1718"</span>, <span class="st">"1819"</span>, <span class="st">"1920"</span><span class="op">)</span>,
  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span>, <span class="st">"anon_chi"</span>, <span class="st">"demographic_cohort"</span><span class="op">)</span>
<span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="reference/get_chi.html">get_chi</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Change chi numbers from data above back to anon_chi</span>
<span class="va">ep_1718_anon</span> <span class="op">&lt;-</span> <span class="va">ep_1718</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="reference/get_anon_chi.html">get_anon_chi</a></span><span class="op">(</span>chi_var <span class="op">=</span> <span class="st">"chi"</span><span class="op">)</span>

<span class="co"># Add anon_chi to cohort sample</span>
<span class="va">chi_cohort</span> <span class="op">&lt;-</span> <span class="va">chi_cohort</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="reference/get_anon_chi.html">get_anon_chi</a></span><span class="op">(</span>chi_var <span class="op">=</span> <span class="st">"upi_number"</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Public-Health-Scotland/slfhelper/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/Public-Health-Scotland/slfhelper/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing slfhelper</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>James McMahon <br><small class="roles"> Maintainer, author </small> <a href="https://orcid.org/0000-0002-5380-2029" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Public-Health-Scotland/slfhelper/releases/latest" class="external-link"><img src="https://img.shields.io/github/v/release/Public-Health-Scotland/slfhelper" alt="GitHub release (latest by date)"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://github.com/Public-Health-Scotland/slfhelper/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/Public-Health-Scotland/slfhelper/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/Public-Health-Scotland/slfhelper" class="external-link"><img src="https://codecov.io/gh/Public-Health-Scotland/slfhelper/branch/production/graph/badge.svg?token=ev2n04MPNG" alt="codecov"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by James McMahon.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
