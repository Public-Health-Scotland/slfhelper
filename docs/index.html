<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Useful functions for working with the Source Linkage Files • slfhelper</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Useful functions for working with the Source Linkage Files">
<meta property="og:description" content="This package provides a few helper functions for working with
    the Source Linkage Files (SLFs). The functions are mainly focussed on
    making the first steps of analysis easier. They can read in and filter
    the files in an efficient way using minimal syntax. If you find a bug
    or have any ideas for new functions or improvements get in touch or
    submit a pull request.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">slfhelper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Public-Health-Scotland/slfhelper/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="slfhelper" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#slfhelper" class="anchor"></a>slfhelper</h1></div>
<p>The goal of slfhelper is to provide some easy to use functions that make working with the Source Linkage Files as painless and efficient as possible.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install slfhelper from GitHub with the <a href="https://remotes.r-lib.org/">remotes package</a>.</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"remotes"</span>)
remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"Public-Health-Scotland/slfhelper"</span>)</code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="read-a-file" class="section level3">
<h3 class="hasAnchor">
<a href="#read-a-file" class="anchor"></a>Read a file</h3>
<p><strong>Note:</strong> Reading a full file is quite slow, we would always recommend doing a column selection to only keep the variables that you need for your analysis. Just doing this will dramatically speed up the read-time.</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r"><span class="kw">library</span>(slfhelper)

<span class="co"># Read a full file</span>
ep_<span class="dv">1718</span> &lt;-<span class="st"> </span><span class="kw">read_slf_episode</span>(<span class="st">"1718"</span>)
indiv_<span class="dv">1718</span> &lt;-<span class="st"> </span><span class="kw">read_slf_individual</span>(<span class="st">"1718"</span>)

<span class="co"># Read multiple years</span>
<span class="co"># This will use dplyr::bind_rows() and return the files added together as a single tibble</span>
episode_data &lt;-<span class="st"> </span><span class="kw">read_slf_episode</span>(<span class="kw">c</span>(<span class="st">"1516"</span>, <span class="st">"1617"</span>, <span class="st">"1718"</span>, <span class="st">"1819"</span>))

<span class="co"># Read certain variables</span>
<span class="co"># It's much faster to choose variables like this</span>
indiv_<span class="dv">1718</span> &lt;-<span class="st"> </span><span class="kw">read_slf_individual</span>(<span class="st">"1718"</span>, <span class="dt">columns =</span> <span class="kw">c</span>(<span class="st">"anon_chi"</span>, <span class="st">"hri_scot"</span>))

<span class="co"># Read only data for a certain partnership (HSCP_2018 code)</span>
<span class="co"># This can be a single partnership or multiple by supplying a vector e.g. c(...)</span>
indiv_<span class="dv">1718</span> &lt;-<span class="st"> </span><span class="kw">read_slf_individual</span>(<span class="st">"1718"</span>, <span class="dt">partnerships =</span> <span class="st">"S37000001"</span>) <span class="co"># Aberdeen City</span>

<span class="co"># Read only data for a certain recid</span>
<span class="co"># This can be a single recid or multiple by supplying a vector e.g. c(...)</span>
ep_<span class="dv">1718</span> &lt;-<span class="st"> </span><span class="kw">read_slf_episode</span>(<span class="st">"1718"</span>, <span class="dt">recid =</span> <span class="kw">c</span>(<span class="st">"01B"</span>, <span class="st">"GLS"</span>))</code></pre></div>
<p>All of the above options for reading files can be combined if required.</p>
<p>There are a few data files included in the package which should be useful.</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r"><span class="co"># Get a list of the variables in a file</span>
slfhelper<span class="op">::</span>ep_file_vars
slfhelper<span class="op">::</span>indiv_file_vars

<span class="co"># See a lookup of Partnership names to HSCP_2018 codes</span>

hscp_lookup &lt;-<span class="st"> </span>slfhelper<span class="op">::</span>partnerships</code></pre></div>
</div>
<div id="match-on-chi-numbers-to-anon_chi-or-vice-versa" class="section level3">
<h3 class="hasAnchor">
<a href="#match-on-chi-numbers-to-anon_chi-or-vice-versa" class="anchor"></a>Match on CHI numbers to Anon_CHI (or vice versa)</h3>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r"><span class="kw">library</span>(slfhelper)

<span class="co"># Add real CHI numbers to a SLF</span>
ep_<span class="dv">1718</span> &lt;-<span class="st"> </span><span class="kw">read_slf_individual</span>(<span class="kw">c</span>(<span class="st">"1718"</span>, <span class="st">"1819"</span>, <span class="st">"1920"</span>),
  <span class="dt">columns =</span> <span class="kw">c</span>(<span class="st">"year"</span>, <span class="st">"anon_chi"</span>, <span class="st">"demographic_cohort"</span>)
) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">get_chi</span>()

<span class="co"># Add anon_chi numbers to a cohort</span>
<span class="co"># Optionaly specifiy the name of the CHI variable</span>
cohort &lt;-<span class="st"> </span>cohort <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">get_anon_chi</span>(<span class="dt">chi_var =</span> <span class="st">"upi_number"</span>)</code></pre></div>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/Public-Health-Scotland/slfhelper/">https://​github.com/​Public-Health-Scotland/​slfhelper/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/Public-Health-Scotland/slfhelper/issues">https://​github.com/​Public-Health-Scotland/​slfhelper/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>James McMahon <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5380-2029" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Public-Health-Scotland/slfhelper/releases/latest"><img src="https://img.shields.io/github/v/release/Public-Health-Scotland/slfhelper" alt="GitHub release (latest by date)"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by James McMahon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
