<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="slfhelper">
<title>Using variable packs • slfhelper</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using variable packs">
<meta property="og:description" content="slfhelper">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">slfhelper</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.10.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/variable-packs.html">Using variable packs</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Public-Health-Scotland/slfhelper/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Using variable packs</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Public-Health-Scotland/slfhelper/blob/HEAD/vignettes/variable-packs.Rmd" class="external-link"><code>vignettes/variable-packs.Rmd</code></a></small>
      <div class="d-none name"><code>variable-packs.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="selecting-only-specified-variables">Selecting only specified variables<a class="anchor" aria-label="anchor" href="#selecting-only-specified-variables"></a>
</h2>
<p>It is recommended to only choose the variables you need when reading
in a Source Linkage File. This can be achieved by specifying a
<code>column</code> argument to the relevant <code>read_slf_</code>
function.</p>
<p>This will result in the data being read in much faster as well as
being easy to work with. The full episode and individual files have 200+
and 100+ variables respectively!</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://public-health-scotland.github.io/slfhelper/">slfhelper</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">ep_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_slf_episode.html">read_slf_episode</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">1920</span>, columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span>, <span class="st">"anon_chi"</span>, <span class="st">"recid"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">indiv_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_slf_individual.html">read_slf_individual</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">1920</span>, columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span>, <span class="st">"anon_chi"</span>, <span class="st">"nsu"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="looking-up-variable-names">Looking up variable names<a class="anchor" aria-label="anchor" href="#looking-up-variable-names"></a>
</h2>
<p>To help with the task of picking which variables you might need for
your analysis, as well as getting the spelling correct, we provide lists
of the variable names in the package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show the first few variables from the episode file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ep_file_vars</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "year"            "recid"           "record_keydate1" "record_keydate2"</span></span>
<span><span class="co">#&gt; [5] "smrtype"         "gender"</span></span>
<span></span>
<span><span class="co"># Do the same for the individual file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">indiv_file_vars</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "anon_chi"        "gender"          "postcode"        "dob"            </span></span>
<span><span class="co">#&gt; [5] "gpprac"          "ch_cis_episodes"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="variable-packs">Variable packs<a class="anchor" aria-label="anchor" href="#variable-packs"></a>
</h2>
<p>This is great but it can still be a lot of effort and copy/pasting
every time, especially if you need quite a few variables for your
analysis.</p>
<p>To assist with this, there are a number of ‘variable packs’, these
are groups of variables which would commonly be needed together which
can be accessed with a simple name. Currently there are four packs;
<code>demog_vars</code>, <code>ltc_vars</code>,
<code>ep_file_bedday_vars</code> and <code>ep_file_cost_vars</code>.
Let’s see what they contain.</p>
<div class="section level3">
<h3 id="demographic-variables">Demographic variables<a class="anchor" aria-label="anchor" href="#demographic-variables"></a>
</h3>
<p>These are demographic variables which are specific to CHI and can be
used with episode or individual file.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demog_vars</span></span>
<span><span class="co">#&gt;  [1] "anon_chi"                     "gender"                      </span></span>
<span><span class="co">#&gt;  [3] "dob"                          "age"                         </span></span>
<span><span class="co">#&gt;  [5] "gpprac"                       "hbpraccode"                  </span></span>
<span><span class="co">#&gt;  [7] "postcode"                     "hbrescode"                   </span></span>
<span><span class="co">#&gt;  [9] "hscp2018"                     "lca"                         </span></span>
<span><span class="co">#&gt; [11] "ca2018"                       "locality"                    </span></span>
<span><span class="co">#&gt; [13] "datazone2011"                 "hb2019"                      </span></span>
<span><span class="co">#&gt; [15] "hscp2019"                     "ca2019"                      </span></span>
<span><span class="co">#&gt; [17] "simd2020v2_rank"              "simd2020v2_sc_decile"        </span></span>
<span><span class="co">#&gt; [19] "simd2020v2_sc_quintile"       "simd2020v2_hb2019_decile"    </span></span>
<span><span class="co">#&gt; [21] "simd2020v2_hb2019_quintile"   "simd2020v2_hscp2019_decile"  </span></span>
<span><span class="co">#&gt; [23] "simd2020v2_hscp2019_quintile" "ur8_2016"                    </span></span>
<span><span class="co">#&gt; [25] "ur6_2016"                     "ur3_2016"                    </span></span>
<span><span class="co">#&gt; [27] "ur2_2016"                     "cluster"                     </span></span>
<span><span class="co">#&gt; [29] "demographic_cohort"           "service_use_cohort"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="long-term-condition-ltc-variables">Long Term Condition (LTC) variables<a class="anchor" aria-label="anchor" href="#long-term-condition-ltc-variables"></a>
</h3>
<p>These are the Long Term Condition flag variables which are specific
to CHI and can be used with episode or individual file.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ltc_vars</span></span>
<span><span class="co">#&gt;  [1] "arth"       "asthma"     "atrialfib"  "cancer"     "cvd"       </span></span>
<span><span class="co">#&gt;  [6] "liver"      "copd"       "dementia"   "diabetes"   "epilepsy"  </span></span>
<span><span class="co">#&gt; [11] "chd"        "hefailure"  "ms"         "parkinsons" "refailure" </span></span>
<span><span class="co">#&gt; [16] "congen"     "bloodbfo"   "endomet"    "digestive"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="bedday-variables">Bedday variables<a class="anchor" aria-label="anchor" href="#bedday-variables"></a>
</h3>
<p>These are variables detailing beddays, they are specific to an
episode and can only be used with the episode file.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep_file_bedday_vars</span></span>
<span><span class="co">#&gt;  [1] "yearstay"    "stay"        "apr_beddays" "may_beddays" "jun_beddays"</span></span>
<span><span class="co">#&gt;  [6] "jul_beddays" "aug_beddays" "sep_beddays" "oct_beddays" "nov_beddays"</span></span>
<span><span class="co">#&gt; [11] "dec_beddays" "jan_beddays" "feb_beddays" "mar_beddays"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="cost-variables">Cost variables<a class="anchor" aria-label="anchor" href="#cost-variables"></a>
</h3>
<p>These are variables detailing costs, they are specific to an episode
and can only be used with the episode file.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ep_file_cost_vars</span></span>
<span><span class="co">#&gt;  [1] "cost_total_net"         "cost_total_net_incdnas" "apr_cost"              </span></span>
<span><span class="co">#&gt;  [4] "may_cost"               "jun_cost"               "jul_cost"              </span></span>
<span><span class="co">#&gt;  [7] "aug_cost"               "sep_cost"               "oct_cost"              </span></span>
<span><span class="co">#&gt; [10] "nov_cost"               "dec_cost"               "jan_cost"              </span></span>
<span><span class="co">#&gt; [13] "feb_cost"               "mar_cost"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="using-variable-packs">Using variable packs<a class="anchor" aria-label="anchor" href="#using-variable-packs"></a>
</h2>
<p>These variable packs can be used in the column selection to simplify
your code substantially.</p>
<p>For example to take some demographic data and LTC flags from the
individual file.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://public-health-scotland.github.io/slfhelper/">slfhelper</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">indiv_ltc_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_slf_individual.html">read_slf_individual</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">1920</span>, columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span>, <span class="va">demog_vars</span>, <span class="va">ltc_vars</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Or to get bedday information about Acute records from the episode
file.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://public-health-scotland.github.io/slfhelper/">slfhelper</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">acute_beddays</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_slf_episode.html">read_slf_episode</a></span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="fl">1920</span>,</span>
<span>  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span>, <span class="st">"anon_chi"</span>, <span class="st">"hbtreatcode"</span>, <span class="st">"recid"</span>, <span class="va">ep_file_bedday_vars</span>, <span class="st">"cij_pattype"</span><span class="op">)</span>,</span>
<span>  recid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"01B"</span>, <span class="st">"GLS"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>You should be using the <code>column</code> argument when reading in
data to increase the read speed, and reduce the amount of data you are
loading into R. <code>slfhelper</code> provides a number of helpers to
make picking and using the variables you need easier.</p>
<p>If you would like any changes made to any existing packs, please <a href="https://github.com/Public-Health-Scotland/slfhelper/issues" class="external-link">open
an issue on GitHub</a>.</p>
<p>If you would like to suggest any additional variable packs, either <a href="https://github.com/Public-Health-Scotland/slfhelper/issues" class="external-link">open
an issue</a>, or even <a href="https://usethis.r-lib.org/articles/pr-functions.html" class="external-link">submit a
pull request</a>!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by James McMahon, Megan McNicol.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
